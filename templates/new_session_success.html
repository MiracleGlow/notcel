{% extends "layout.html" %}

{% block title %}Sesi Berhasil!{% endblock %}

{% block content %}
<div class="text-center py-4">
    <div class="mb-4">
        <div class="bg-success text-white rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 64px; height: 64px;">
            <i class="bi bi-check-lg fs-1"></i>
        </div>
    </div>
    
    <h1 class="h4 fw-bold mb-2">Sesi Private Siap!</h1>
    <p class="text-muted small px-4">Ini adalah kunci akses Anda. Simpan sekarang karena tidak akan ditampilkan lagi.</p>

    <div class="card border-success bg-success bg-opacity-10 my-4 mx-auto shadow-sm" style="max-width: 100%;">
        <div class="card-body p-4">
            <h6 class="text-uppercase text-success fw-bold small mb-3">Kode Akses Anda</h6>
            
            <div class="input-group mb-3">
                <input type="text" id="privateCodeInput" class="form-control form-control-lg text-center fw-bold text-dark border-success" value="{{ code }}" readonly style="letter-spacing: 1px;">
                <button class="btn btn-success px-3" type="button" id="copyCodeBtn">
                    <i class="bi bi-clipboard fs-5"></i>
                </button>
            </div>
            
            <a href="{{ url_for('edit_session', session_type='private', session_name=session_name) }}" class="btn btn-primary w-100 shadow-sm py-2">
                Buka Sesi Sekarang <i class="bi bi-arrow-right ms-1"></i>
            </a>
        </div>
    </div>
    
    <a href="{{ url_for('index') }}" class="btn btn-link text-decoration-none text-muted">Kembali ke Home</a>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', () => {
    const copyButton = document.getElementById('copyCodeBtn');
    const codeInput = document.getElementById('privateCodeInput');

    if (copyButton && codeInput && navigator.clipboard) {
        copyButton.addEventListener('click', () => {
            navigator.clipboard.writeText(codeInput.value).then(() => {
                const icon = copyButton.querySelector('i');
                icon.className = 'bi bi-check-lg fs-5';
                setTimeout(() => { icon.className = 'bi bi-clipboard fs-5'; }, 2000);
            });
        });
    }
});
</script>
{% endblock %}